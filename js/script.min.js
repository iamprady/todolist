console.log("%c The website uses local storage to store your todos. Clearing Cookies or site data will remove your todos!!","padding:15px; background-color:yellow; color:red;");const themeChanger=document.getElementById("theme"),container=document.querySelector(".container"),form=document.getElementById("todo-form"),input=document.getElementById("todo"),todoList=document.querySelector(".todo-ul"),status=document.querySelector(".items-left"),clear=document.querySelector(".clear"),todoClassifiers=document.querySelectorAll(".todo-classify p"),all=document.getElementById("all"),active=document.getElementById("active"),completed=document.getElementById("completed");let checkBtns=document.querySelectorAll("button.check"),checkSvg='<svg xmlns="http://www.w3.org/2000/svg" width="11" height="9"><path fill="none" stroke="#FFF" stroke-width="2" d="M1 4.304L3.696 7l6-6"/></svg>',crossSvg='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path fill="#494C6B" fill-rule="evenodd" d="M16.97 0l.708.707L9.546 8.84l8.132 8.132-.707.707-8.132-8.132-8.132 8.132L0 16.97l8.132-8.132L0 .707.707 0 8.84 8.132 16.971 0z"/></svg>',theme="dark",todos=[],itemsLeft=0;function setTheme(){localStorage.setItem("theme",theme),document.documentElement.className=theme}function uuid(){let e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","1","2","3","4","5","6","7","8","9","0","#","%","&"],t="";for(let o=0;o<12;o++)t+=e[Math.floor(Math.random()*e.length)];return t}function changeStateOfTodo(e){if("check"===e.target.classList[0]){let t=e.target.parentElement,o=t.getAttribute("id");[...t.classList].includes("checked")?(itemsLeft++,status.textContent=`${itemsLeft}${1===itemsLeft?" item":" items"} left`):(itemsLeft--,status.textContent=`${itemsLeft}${1===itemsLeft?" item":" items"} left`),t.classList.toggle("checked"),todos=todos.map(e=>e.id===o?(e.checked=!e.checked,e):e),localStorage.setItem("todos",JSON.stringify(todos))}else{if("delete"!==e.target.classList[0])return;{let t=e.target.parentElement;[...t.classList].includes("checked")||(itemsLeft--,status.textContent=`${itemsLeft}${1===itemsLeft?" item":" items"} left`);let o=t.getAttribute("id");todoList.removeChild(t),todos=todos.filter(e=>e.id!==o),localStorage.setItem("todos",JSON.stringify(todos))}}}function addListeners(e){e.addEventListener("click",changeStateOfTodo),e.addEventListener("dragstart",()=>{e.classList.add("dragging")}),e.addEventListener("touchstart",()=>{let t=new DragEvent("dragstart");e.dispatchEvent(t)},{passive:!0}),e.addEventListener("touchmove",e=>{const t=e.targetTouches[0];let o=new DragEvent("dragover",{clientY:t.clientY});todoList.dispatchEvent(o)},{passive:!0}),e.addEventListener("touchend",()=>{let t=new DragEvent("dragend");e.dispatchEvent(t)}),e.addEventListener("dragend",()=>{const t=e.getAttribute("id");let o,d=todos.find(e=>e.id===t);todos=todos.filter(e=>e.id!==t),[...e.parentElement.children].find((e,d)=>e.id===t&&(o=d,!0)),todos.splice(o,0,d),localStorage.setItem("todos",JSON.stringify(todos)),e.classList.remove("dragging")})}function getDragAfterElement(e){return[...container.querySelectorAll(".todo-li:not(.dragging)")].reduce((t,o)=>{const d=o.getBoundingClientRect(),s=e-d.top-d.height/2;return s<0&&s>t.offset?{offset:s,element:o}:t},{offset:Number.NEGATIVE_INFINITY}).element}function seed(){todos.forEach(e=>{let t=document.createElement("li");t.classList.add("todo-li");let o=document.createElement("button");o.classList.add("check"),o.setAttribute("aria-label","mark completed"),o.innerHTML=checkSvg,t.appendChild(o);let d=document.createElement("p");d.textContent=e.text,t.appendChild(d);let s=document.createElement("button");s.classList.add("delete"),s.setAttribute("aria-label","delete todo"),s.innerHTML=crossSvg,t.appendChild(s),t.setAttribute("id",e.id),t.setAttribute("draggable",!0),e.checked?t.classList.add("checked"):itemsLeft++,addListeners(t),todoList.appendChild(t)})}window.addEventListener("DOMContentLoaded",()=>{document.querySelector(":root").style.setProperty("--vh",window.innerHeight/100+"px"),todoInfoSectionElement=document.querySelector(".todo-info");let e=localStorage.getItem("theme"),t=localStorage.getItem("todos");e?(theme="light"===e?"light":"dark",setTheme()):localStorage.setItem("theme","dark"),t&&RegExp(/^\[.*?\]/).test(t)?(todos=[...JSON.parse(t)],seed()):(todos=[{id:uuid(),text:"example todo #1",checked:!0},{id:uuid(),text:"example todo #2",checked:!1}],seed(),localStorage.setItem("todos",JSON.stringify(todos))),status.textContent=`${itemsLeft}${1===itemsLeft?" item":" items"} left`}),themeChanger.addEventListener("click",()=>{theme="dark"===theme?"light":"dark",setTheme()}),form.addEventListener("submit",e=>{e.preventDefault(),itemsLeft++;let t=document.createElement("li");t.classList.add("todo-li");let o=document.createElement("button");o.classList.add("check"),o.setAttribute("aria-label","mark completed"),o.innerHTML=checkSvg,t.appendChild(o);let d=document.createElement("p");d.textContent=input.value,t.appendChild(d);let s=document.createElement("button");s.classList.add("delete"),s.setAttribute("aria-label","delete todo"),s.innerHTML=crossSvg,t.appendChild(s);let i=uuid();t.setAttribute("id",i),t.setAttribute("draggable",!0);let l={id:i,text:input.value,checked:!1};todos.unshift(l),localStorage.setItem("todos",JSON.stringify(todos)),addListeners(t),todoList.insertBefore(t,todoList.children[0]),input.value="",status.textContent=`${itemsLeft}${1===itemsLeft?" item":" items"} left`}),todoList.addEventListener("dragover",e=>{e.preventDefault();const t=getDragAfterElement(e.clientY),o=document.querySelector(".dragging");null===t?todoList.appendChild(o):todoList.insertBefore(o,t)}),all.addEventListener("click",()=>{todoClassifiers.forEach(e=>e.classList.remove("active")),all.classList.add("active"),[...container.querySelectorAll(".todo-li")].forEach(e=>e.classList.remove("hide"))}),active.addEventListener("click",()=>{todoClassifiers.forEach(e=>e.classList.remove("active")),active.classList.add("active");const e=[...container.querySelectorAll(".todo-li.checked")],t=[...container.querySelectorAll(".todo-li:not(.checked)")];e.forEach(e=>e.classList.add("hide")),t.forEach(e=>e.classList.remove("hide"))}),completed.addEventListener("click",()=>{todoClassifiers.forEach(e=>e.classList.remove("active")),completed.classList.add("active");const e=[...container.querySelectorAll(".todo-li.checked")],t=[...container.querySelectorAll(".todo-li:not(.checked)")];e.forEach(e=>e.classList.remove("hide")),t.forEach(e=>e.classList.add("hide"))}),clear.addEventListener("click",()=>{todoList.querySelectorAll(".todo-li.checked").forEach(e=>todoList.removeChild(e)),todos=todos.filter(e=>!0!==e.checked),localStorage.setItem("todos",JSON.stringify(todos))});